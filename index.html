<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <script
      src="https://kit.fontawesome.com/a14ae32021.js"
      crossorigin="anonymous"
    ></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>This one is for my Adu</title>

    <style type="text/css">
      @font-face {
        font-family: digit;
        src: url("digital-7_mono.ttf") format("truetype");
      }
    </style>

    <link href="css/default.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/garden.js"></script>
    <script type="text/javascript" src="js/functions.js"></script>
  </head>

  <body>
    <div id="mainDiv">
      <div id="content">
        <div id="code">
          <span class="comments">/**</span><br />
          <span class="space" /><span class="comments">*AN APOLOGY IN CODE</span
          ><br />
          <span class="space" /><span class="comments">*/</span><br />

          I know I've made a mistake...<br />
          <span class="comments">// and I can't stop thinking about it</span
          ><br />
          I wish I could take back what I said<br />
          <span class="comments">// You didn't deserve that</span><br />
          You mean everything to me<br />
          <span class="comments"
            >// and I hate being the reason you're upset</span
          ><br />
          I don't want to make you feel this way<br />
          <span class="comments">// ever</span><br />
          Your smile lights up my world<br />
          <span class="comments"
            >// I want that light to shine brighter than ever</span
          ><br />
          Every moment of peace or chaos without you feels empty<br />
          <span class="comments">// It really does</span><br />
          I promise to do better<br />
          <span class="comments">// and to listen, always</span><br />
          I hope you can like me again<br />
          <span class="comments">// I'll make things right</span><br />

          <br />
          I miss you 🥺❤️<br />
          <br />

          <span id="heartspan">
            <a href="gallery.html" target="_blank">
              <i class="fas fa-heart" id="icon"></i>
            </a> </span
          ><br />
          <span class="comments">// click the heart to see our memories</span>
        </div>

        <div id="loveHeart">
          <canvas id="garden"></canvas>
          <div id="words">
            <div id="messages">
              Days since Adu & Malju met
              <div id="elapseClock"></div>
            </div>
            <div id="loveu">
              I LOVE YOU SO MUCH<br />
              <div class="signature">- Omkar <3</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      var offsetX = $("#loveHeart").width() / 2;
      var offsetY = $("#loveHeart").height() / 2 - 55;
      var together = new Date();
      together.setFullYear(2015, 1, 1);
      together.setHours(16);
      together.setMinutes(30);
      together.setSeconds(0);
      together.setMilliseconds(0);

      if (!document.createElement("canvas").getContext) {
        var msg = document.createElement("div");
        msg.id = "errorMsg";
        msg.innerHTML =
          "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+";
        document.body.appendChild(msg);
        $("#code").css("display", "none");
        $("#copyright").css("position", "absolute");
        $("#copyright").css("bottom", "10px");
        document.execCommand("stop");
      } else {
        setTimeout(function () {
          startHeartAnimation();
        }, 5000);

        timeElapse(together);
        setInterval(function () {
          timeElapse(together);
        }, 500);

        adjustCodePosition();
        $("#code").typewriter();
      }
    </script>

    <audio id="bg-music" autoplay loop preload="auto">
      <source src="The-Night-We-Met.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>

    <button
      id="musicToggle"
      style="
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 999;
        background-color: rgba(255, 255, 255, 0.7);
        border: none;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 14px;
        cursor: pointer;
      "
    >
      🔊 Play Music
    </button>

    <script>
      const bgMusic = document.getElementById("bg-music");
      const toggleBtn = document.getElementById("musicToggle");

      // Force autoplay on load, retry if blocked
      window.addEventListener("load", () => {
        const tryPlay = () => {
          bgMusic.volume = 1.0;
          const playPromise = bgMusic.play();

          if (playPromise !== undefined) {
            playPromise
              .then(() => {
                toggleBtn.textContent = "🔈 Mute Music";
              })
              .catch((error) => {
                console.log(
                  "Autoplay blocked. Waiting for user interaction..."
                );
                toggleBtn.textContent = "🔊 Play Music";
                document.addEventListener("click", userInitiatedPlay, {
                  once: true,
                });
              });
          }
        };

        const userInitiatedPlay = () => {
          bgMusic.play();
          toggleBtn.textContent = "🔈 Mute Music";
        };

        tryPlay();
      });

      toggleBtn.addEventListener("click", function () {
        if (bgMusic.paused) {
          bgMusic.play();
          toggleBtn.textContent = "🔈 Mute Music";
        } else {
          bgMusic.pause();
          toggleBtn.textContent = "🔊 Play Music";
        }
      });
    </script>
  </body>
</html>
